{
  "databaseChangeLog": [
    {
      "changeSet": {
        "preConditions": [
          {
            "onFail": "MARK_RAN",
            "not": [
              {
                "tableExists": {
                  "tableName": "pulp_talents_coc"
                }
              }
            ]
          }
        ],
        "id": "202209031537",
        "author": "HannaBananna",
        "changes": [
          {
            "createTable": {
              "tableName": "pulp_talents_coc",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "uuid",
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    },
                    "defaultValueComputed": "gen_random_uuid()"
                  }
                },
                {
                  "column": {
                    "name": "name",
                    "type": "varchar(50)",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "description",
                    "type": "text",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "create_date",
                    "type": "timestamp",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueDate": "current_timestamp"
                  }
                },
                {
                  "column": {
                    "name": "update_date",
                    "type": "timestamp",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueDate": "current_timestamp"
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "preConditions": [
          {
            "onFail": "MARK_RAN",
            "not": [
              {
                "tableExists": {
                  "tableName": "session_coc"
                }
              }
            ]
          },
          {
            "tableExists": {
              "tableName": "session"
            }
          }
        ],
        "id": "202211111145",
        "author": "HannaBananna",
        "changes": [
          {
            "createTable": {
              "tableName": "session_coc",
              "columns": [
                {
                  "column": {
                    "name": "session_id",
                    "type": "uuid",
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false,
                      "foreignKeyName": "fk_session_character_sheet",
                      "references": "session(session_id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "pulp_cthulhu",
                    "type": "boolean",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueBoolean":false
                  }
                },
                {
                  "column": {
                    "name": "create_date",
                    "type": "timestamp",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueDate": "current_timestamp"
                  }
                },
                {
                  "column": {
                    "name": "update_date",
                    "type": "timestamp",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueDate": "current_timestamp"
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "preConditions": [
          {
            "onFail": "MARK_RAN",
            "not": [
              {
                "tableExists": {
                  "tableName": "character_sheet_coc"
                }
              }
            ]
          },
          {
            "tableExists": {
              "tableName": "character_sheet"
            }
          }
        ],
        "id": "202211111447",
        "author": "HannaBananna",
        "changes": [
          {
            "createTable": {
              "tableName": "character_sheet_coc",
              "columns": [
                {
                  "column": {
                    "name": "character_sheet_id",
                    "type": "uuid",
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false,
                      "foreignKeyName": "fk_character_sheet_core",
                      "references": "character_sheet(character_sheet_id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "pulp_cthulhu",
                    "type": "boolean",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueBoolean":false
                  }
                },
                {
                  "column": {
                    "name": "age",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "sex",
                    "type": "varchar(50)"
                  }
                },
                {
                  "column": {
                    "name": "birthplace",
                    "type": "varchar(100)"
                  }
                },
                {
                  "column": {
                    "name": "residence",
                    "type": "varchar(100)"
                  }
                },
                {
                  "column": {
                    "name": "strength",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "constitution",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "size",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "dexterity",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "appearance",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "intelligence",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "power",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "education",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "luck",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "move_rate",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "health_points",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "magic_points",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "sanity",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "starting_sanity",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "maximum_health_points",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "maximum_magic_points",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "maximum_sanity",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "build",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "bonus_damage",
                    "type": "varchar(10)",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "dodge",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "dodge_improvement_check",
                    "type": "boolean",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueBoolean":false
                  }
                },
                {
                  "column": {
                    "name": "language_own",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "language_own_improvement_check",
                    "type": "boolean",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueBoolean":false
                  }
                },
                {
                  "column": {
                    "name": "occupational_skill_points",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "personal_interest_skill_points",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "major_wounds",
                    "type": "boolean",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueBoolean":false
                  }
                },
                {
                  "column": {
                    "name": "temporary_insanity",
                    "type": "boolean",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueBoolean":false
                  }
                },
                {
                  "column": {
                    "name": "indefinite_insanity",
                    "type": "boolean",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueBoolean":false
                  }
                },
                {
                  "column": {
                    "name": "credit_rating",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "cthulhu_mythos",
                    "type": "integer",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "create_date",
                    "type": "timestamp",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueDate": "current_timestamp"
                  }
                },
                {
                  "column": {
                    "name": "update_date",
                    "type": "timestamp",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueDate": "current_timestamp"
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "changeSet" : {
        "preConditions": [
          {
            "onFail": "MARK_RAN",
            "not": [
              {
                "tableExists": {
                  "tableName": "skills_coc"
                }
              }
            ]
          }
        ],
        "id": "202212091729",
        "author": "HannaBananna",
        "changes": [
          {
            "createTable": {
              "tableName": "skills_coc",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "uuid",
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    },
                    "defaultValueComputed": "gen_random_uuid()"
                  }
                },
                {
                  "column": {
                    "name": "name",
                    "type": "varchar(50)",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "base_value",
                    "type": "integer"
                  }
                },
                {
                  "column": {
                    "name": "skill_rarity",
                    "type": "varchar(45)",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "skill_kind",
                    "type": "varchar(45)",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "parent_id",
                    "type": "uuid",
                    "constraints": {
                      "foreignKeyName": "fk_parent_skill",
                      "references": "skills_coc(id)"
                    }
                  }
                },
                {
                  "column": {
                    "name": "usable",
                    "type": "boolean",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueBoolean":true
                  }
                },
                {
                  "column": {
                    "name": "create_date",
                    "type": "timestamp",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueDate": "current_timestamp"
                  }
                },
                {
                  "column": {
                    "name": "update_date",
                    "type": "timestamp",
                    "constraints": {
                      "nullable": false
                    },
                    "defaultValueDate": "current_timestamp"
                  }
                }
              ]
            }
          }
        ]
      }
    }
  ]
}